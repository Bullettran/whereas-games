import{_}from"./CoeQO_PD.js";import{u as x}from"./ZtCTLdtK.js";import{m as $,_ as w,o as u,c as d,a as o,t as c,q as k,F as h,n as y,u as L,b as D}from"./1EpAYDnX.js";const E={ranger:[{id:"ranger-Sniper-shot",name:"Снайперский выстрел",type:"attack",rare:"rare",description:"Наносит 3 урона, +100% шанс попадания на 1 ход",icon:"ranger-sniper-shot.png",manaCost:3,count:1,bonus:{attack:3,buff:{hitChance:!0,duration:1}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{attack:1,buff:{hitChance:!0,duration:.2}}},{id:"ranger-Hunter's-mark",name:"Метка охотника",type:"buff",rare:"rare",description:"Накладывает кровотечение (2 урона за ход, 3 хода)",icon:"ranger-hunters-mark.png",manaCost:3,count:1,bonus:{debuff:{bleed:{value:2,duration:3}}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{debuff:{bleed:{value:1,duration:.3}}}},{id:"ranger-Rapid-fire",name:"Быстрая стрельба",type:"attack",rare:"rare",description:"Наносит 5 урона, накладывает яд (2 урона за ход, 3 хода)",icon:"ranger-rapid-fire.png",manaCost:3,count:1,bonus:{attack:5,debuff:{poison:{value:2,duration:3}}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{attack:1,debuff:{poison:{value:.5,duration:.3}}}},{id:"ranger-Hunting-trap",name:"Охотничья ловушка",type:"control",rare:"rare",description:"Замедляет врага (-5 скорости на 2 хода)",icon:"ranger-hunting-trap.png",manaCost:1,count:1,bonus:{debuff:{speed:-5,duration:2}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{debuff:{speed:-.5,duration:.2}}},{id:"ranger-Explosive-shot",name:"Взрывной выстрел",type:"attack",rare:"rare",description:"Наносит 2 урона, +5 уклонения на 2 хода",icon:"ranger-explosive-shot.png",manaCost:2,count:1,bonus:{attack:2,buff:{dodge:5,duration:2}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{attack:.5,buff:{dodge:1,duration:.2}}},{id:"ranger-Aimed-shot",name:"Меткий выстрел",type:"attack",rare:"common",description:"Наносит 2 урона, +10 меткости на 2 хода",icon:"ranger-aimed-shot.png",manaCost:2,count:2,bonus:{attack:2,buff:{hitChance:10,duration:2}},level:1,maxLevel:10,upgradeCost:3,upgradeEffect:{attack:.5,buff:{hitChance:1,duration:.2}}},{id:"ranger-Healing-salve",name:"Целебный бальзам",type:"heal",rare:"common",description:"Восстанавливает 3 HP",icon:"ranger-healing-salve.png",manaCost:2,count:1,bonus:{hp:3},level:1,maxLevel:10,upgradeCost:3,upgradeEffect:{hp:1}},{id:"ranger-Camouflage",name:"Камуфляж",type:"defense",rare:"rare",description:"+30 уклонения на 2 хода",icon:"ranger-camouflage.png",manaCost:2,count:1,bonus:{buff:{dodge:30,duration:2}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{dodge:2,duration:.2}}},{id:"ranger-Hunter's-sense",name:"Чувство охотника",type:"buff",rare:"epic",description:"+5 урона, +10% шанс критического удара на 1 ход",icon:"ranger-hunters-sense.png",manaCost:4,count:1,bonus:{buff:{attack:5,critical:10,duration:1}},level:1,maxLevel:10,upgradeCost:7,upgradeEffect:{buff:{attack:1,critical:2,duration:.2}}}],wrecker:[{id:"wrecker-Smash",name:"Сокрушение",type:"attack",rare:"rare",description:"Наносит 3 урона, игнорирует 50% защиты на 2 хода",icon:"wrecker-smash.png",manaCost:3,count:1,bonus:{attack:3,buff:{ignoreDefense:50,duration:2}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{attack:1,buff:{ignoreDefense:2,duration:.2}}},{id:"wrecker-Diamond-shield",name:"Алмазный щит",type:"defense",rare:"rare",description:"+2 защиты, +1 урона на 2 хода",icon:"wrecker-diamond-shield.png",manaCost:2,count:1,bonus:{buff:{defence:2,attack:1,duration:2}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{defence:1,attack:.5,duration:.2}}},{id:"wrecker-Shock-wave",name:"Ударная волна",type:"control",rare:"rare",description:"Оглушает на 1 ход, -20% защиты на 2 хода",icon:"wrecker-shock-wave.png",manaCost:3,count:1,bonus:{debuff:{stun:!0,ignoreDefense:20,duration:2}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{debuff:{stun:!0,ignoreDefense:2,duration:.2}}},{id:"wrecker-Surge-of-strength",name:"Прилив сил",type:"heal",rare:"rare",description:"Восстанавливает 4 HP",icon:"wrecker-surge-of-strength.png",manaCost:2,count:4,bonus:{hp:4},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{hp:1}},{id:"wrecker-Crystal-infusion",name:"Кристальная инфузия",type:"buff",rare:"rare",description:"+4 урона, невосприимчивость к дебаффам на 3 хода",icon:"wrecker-crystal-infusion.png",manaCost:5,count:1,bonus:{buff:{attack:4,debuffImmune:!0,duration:3}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{attack:1,debuffImmune:!0,duration:.3}}},{id:"wrecker-Farcical-blow",name:"Фарсированный удар",type:"attack",rare:"rare",description:"Наносит 3 урона",icon:"wrecker-farcical-blow.png",manaCost:2,count:1,bonus:{attack:3},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{attack:1}},{id:"wrecker-Crystallization",name:"Кристаллизация",type:"defense",rare:"rare",description:"+10 защиты на 1 ход",icon:"wrecker-crystallization.png",manaCost:3,count:1,bonus:{buff:{defence:10,duration:1}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{defence:2,duration:.2}}},{id:"wrecker-Jeweler's-precision",name:"Точность ювелира",type:"buff",rare:"rare",description:"+100% меткости на 2 хода",icon:"wrecker-jewelers-precision.png",manaCost:2,count:1,bonus:{buff:{hitChance:!0,duration:2}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{hitChance:!0,duration:.3}}},{id:"wrecker-Powerful-blow",name:"Мощный удар",type:"attack",rare:"rare",description:"Наносит 2 урона, +1 урона на 1 ход",icon:"wrecker-powerful-blow.png",manaCost:2,count:1,bonus:{attack:2,buff:{attack:1,duration:1}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{attack:1,buff:{attack:.5,duration:.2}}}],arcanist:[{id:"arcanist-Fireball",name:"Огненный шар",type:"attack",rare:"rare",description:"Наносит 3 магического урона",icon:"arcanist-fireball.png",manaCost:5,count:1,bonus:{attack:3},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{attack:1}},{id:"arcanist-Frost-arrow",name:"Ледяная стрела",type:"attack",rare:"rare",description:"Наносит 2 магического урона, замораживает на 1 ход",icon:"arcanist-frost-arrow.png",manaCost:3,count:1,bonus:{attack:2,debuff:{freeze:{duration:1}}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{attack:.5,debuff:{freeze:{duration:.2}}}},{id:"arcanist-Magical-flash",name:"Магическая вспышка",type:"attack",rare:"rare",description:"Наносит 1 магического урона, замораживает на 1 ход",icon:"arcanist-magical-flash.png",manaCost:1,count:1,bonus:{attack:1,debuff:{freeze:{duration:1}}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{attack:.3,debuff:{freeze:{duration:.2}}}},{id:"arcanist-Frost-barrier",name:"Ледяной барьер",type:"defense",rare:"rare",description:"+4 защиты, замораживает врагов на 1 ход при защите",icon:"arcanist-frost-barrier.png",manaCost:4,count:1,bonus:{buff:{defence:4,duration:1},debuff:{freeze:{duration:1}}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{defence:1,duration:.2},debuff:{freeze:{duration:.2}}}},{id:"arcanist-Magic-trick",name:"Магическая уловка",type:"utility",rare:"rare",description:"Восстанавливает 5 маны на 3 хода",icon:"arcanist-magic-trick.png",manaCost:3,count:1,bonus:{buff:{mp:5,duration:3}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{mp:1,duration:.3}}},{id:"arcanist-Surge-of-power",name:"Прилив сил",type:"heal",rare:"rare",description:"Восстанавливает 4 HP и 4 маны",icon:"arcanist-surge-of-power.png",manaCost:2,count:1,bonus:{hp:4,buff:{mp:4}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{hp:1,buff:{mp:1}}},{id:"arcanist-Rings-of-cold",name:"Кольца холода",type:"control",rare:"rare",description:"Замораживает врагов на 2 хода",icon:"arcanist-rings-of-cold.png",manaCost:3,count:1,bonus:{debuff:{freeze:{duration:2}}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{debuff:{freeze:{duration:.3}}}},{id:"arcanist-True-trinity",name:"Истинное тринити",type:"attack",rare:"epic",description:"Наносит 5 магического урона, накладывает горение (2 урона за ход, 3 хода), замораживает на 1 ход",icon:"arcanist-true-trinity.png",manaCost:7,count:1,bonus:{attack:5,debuff:{burn:{value:2,duration:3},freeze:{duration:1}}},level:1,maxLevel:10,upgradeCost:7,upgradeEffect:{attack:1,debuff:{burn:{value:.5,duration:.3},freeze:{duration:.2}}}},{id:"arcanist-Hidden-knowledge",name:"Скрытые знания",type:"buff",rare:"rare",description:"+5 магического урона на 2 хода",icon:"arcanist-hidden-knowledge.png",manaCost:3,count:1,bonus:{buff:{attack:5,duration:2}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{attack:1,duration:.3}}},{id:"arcanist-Magic-shield",name:"Магический щит",type:"defense",rare:"common",description:"+3 защиты на 2 хода",icon:"arcanist-magic-shield.png",manaCost:2,count:1,bonus:{buff:{defence:3,duration:2}},level:1,maxLevel:10,upgradeCost:3,upgradeEffect:{buff:{defence:1,duration:.2}}},{id:"arcanist-Lightning",name:"Молния",type:"attack",rare:"rare",description:"Наносит 3 магического урона",icon:"arcanist-lightning.png",manaCost:4,count:1,bonus:{attack:3},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{attack:1}},{id:"arcanist-magic-explosion",name:"Магический взрыв",type:"attack",rare:"epic",description:"Наносит 2 магического урона всем врагам",icon:"arcanist-magic-explosion.png",manaCost:6,count:1,bonus:{attack:2,aoe:!0},level:1,maxLevel:10,upgradeCost:7,upgradeEffect:{attack:.5}},{id:"arcanist-Mana-restore",name:"Восстановление маны",type:"buff",rare:"common",description:"Восстанавливает 5 маны",icon:"arcanist-mana-restore.png",manaCost:0,count:1,bonus:{buff:{mp:5}},level:1,maxLevel:10,upgradeCost:3,upgradeEffect:{buff:{mp:1}}},{id:"arcanist-Ice-barrier",name:"Ледяной барьер",type:"defense",rare:"rare",description:"+2 защиты на 2 хода",icon:"arcanist-ice-barrier.png",manaCost:2,count:1,bonus:{buff:{defence:2,duration:2}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{defence:1,duration:.2}}},{id:"arcanist-Fire-arrow",name:"Огненная стрела",type:"attack",rare:"common",description:"Наносит 2 магического урона",icon:"arcanist-fire-arrow.png",manaCost:2,count:1,bonus:{attack:2},level:1,maxLevel:10,upgradeCost:3,upgradeEffect:{attack:.5}},{id:"arcanist-Magic-aura",name:"Магическая аура",type:"buff",rare:"rare",description:"+2 магического урона на 2 хода",icon:"arcanist-magic-aura.png",manaCost:3,count:1,bonus:{buff:{attack:2,duration:2}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{attack:.5,duration:.2}}},{id:"arcanist-Freeze",name:"Заморозка",type:"control",rare:"rare",description:"Замораживает врага на 1 ход",icon:"arcanist-freeze.png",manaCost:3,count:1,bonus:{debuff:{freeze:{duration:1}}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{debuff:{freeze:{duration:.3}}}}],monk:[{id:"monk-Meditation",name:"Медитация",type:"buff",rare:"rare",description:"+3 защиты, +3 урона на 3 хода",icon:"monk-meditation.png",manaCost:2,count:1,bonus:{buff:{defence:3,attack:3,duration:3}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{defence:1,attack:1,duration:.3}}},{id:"monk-spiritual-strike",name:"Духовный удар",type:"attack",rare:"rare",description:"Наносит 2 урона, +20% шанс критического удара",icon:"monk-spiritual-strike.png",manaCost:5,count:1,bonus:{attack:2,buff:{critical:20}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{attack:1,buff:{critical:2}}},{id:"monk-Tiger-strike",name:"Удар тигра",type:"attack",rare:"rare",description:"Наносит 2 урона, +2 урона на 2 хода",icon:"monk-tiger-strike.png",manaCost:2,count:1,bonus:{attack:2,buff:{attack:2,duration:2}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{attack:.5,buff:{attack:.5,duration:.2}}},{id:"monk-Dragon-strike",name:"Удар дракона",type:"attack",rare:"rare",description:"Наносит 2 урона, накладывает горение (2 урона за ход, 2 хода)",icon:"monk-dragon-strike.png",manaCost:3,count:1,bonus:{attack:2,debuff:{burn:{value:2,duration:2}}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{attack:.5,debuff:{burn:{value:.5,duration:.2}}}},{id:"monk-Stone-armor",name:"Каменный доспех",type:"defense",rare:"rare",description:"Блокирует атаку на 1 ход",icon:"monk-stone-armor.png",manaCost:3,count:1,bonus:{buff:{immune:!0,duration:1}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{immune:!0,duration:.2}}},{id:"monk-Balance",name:"Равновесие",type:"heal",rare:"rare",description:"Исцеляет 1 HP в течение 4 ходов",icon:"monk-balance.png",manaCost:3,count:1,bonus:{buff:{hp:1,duration:4}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{hp:.5,duration:.4}}},{id:"monk-Path-of-goodness",name:"Путь добра",type:"heal",rare:"epic",description:"Исцеляет 100% HP, блокирует исцеление на 7 ходов",icon:"monk-path-of-goodness.png",manaCost:4,count:1,bonus:{hp:20,debuff:{healBlock:!0,duration:7}},level:1,maxLevel:10,upgradeCost:7,upgradeEffect:{debuff:{healBlock:!0,duration:-.7}}},{id:"monk-Path-of-hate",name:"Путь ненависти",type:"buff",rare:"epic",description:"+4 урона на 7 ходов, блокирует исцеление",icon:"monk-path-of-hate.png",manaCost:2,count:1,bonus:{buff:{attack:4,duration:7},debuff:{healBlock:!0,duration:7}},level:1,maxLevel:10,upgradeCost:7,upgradeEffect:{buff:{attack:1,duration:-.5},debuff:{healBlock:!0,duration:-.5}}},{id:"monk-Strike-of-the-rising-sun",name:"Удар восходящего солнца",type:"attack",rare:"rare",description:"Наносит 1 урон, восстанавливает 2 маны на 2 хода",icon:"monk-strike-of-the-rising-sun.png",manaCost:1,count:1,bonus:{attack:1,buff:{mp:2,duration:2}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{attack:.3,buff:{mp:.5,duration:.2}}}],inferno:[{id:"inferno-Hell-explosion",name:"Адский взрыв",type:"attack",rare:"rare",description:"Наносит 2 магического урона",icon:"inferno-hell-explosion.png",manaCost:3,count:1,bonus:{attack:2},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{attack:.5}},{id:"inferno-Flame-shield",name:"Огненный щит",type:"defense",rare:"rare",description:"+3 защиты на 2 хода, накладывает горение (1 урона за ход, 2 хода)",icon:"inferno-flame-shield.png",manaCost:2,count:1,bonus:{buff:{defence:3,duration:2},debuff:{burn:{value:1,duration:2}}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{defence:1,duration:.2},debuff:{burn:{value:.3,duration:.2}}}},{id:"inferno-Wrath-of-Inferno",name:"Гнев инферно",type:"buff",rare:"epic",description:"+3 магического урона на 6 ходов",icon:"inferno-wrath-of-Inferno.png",manaCost:3,count:1,bonus:{buff:{attack:3,duration:6}},level:1,maxLevel:10,upgradeCost:7,upgradeEffect:{buff:{attack:1,duration:.4}}},{id:"inferno-Eternal-flame",name:"Вечное пламя",type:"attack",rare:"rare",description:"Накладывает горение (2 урона за ход, 5 ходов)",icon:"inferno-eternal-flame.png",manaCost:5,count:1,bonus:{debuff:{burn:{value:2,duration:5}}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{debuff:{burn:{value:.5,duration:.5}}}},{id:"inferno-Live-bomb",name:"Живая бомба",type:"attack",rare:"rare",description:"Наносит 3 магического урона, +2 урона на 1 ход",icon:"inferno-live-bomb.png",manaCost:3,count:1,bonus:{attack:3,buff:{attack:2,duration:1}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{attack:1,buff:{attack:.5,duration:.2}}},{id:"inferno-Holy-flame",name:"Святое пламя",type:"heal",rare:"rare",description:"Исцеляет на 5 HP",icon:"inferno-holy-flame.png",manaCost:5,count:1,bonus:{hp:5},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{hp:1}},{id:"inferno-Small-flame",name:"Малое пламя",type:"attack",rare:"common",description:"Наносит 1 магического урона, накладывает горение (2 урона за ход, 2 хода)",icon:"inferno-small-flame.png",manaCost:1,count:1,bonus:{attack:1,debuff:{burn:{value:2,duration:2}}},level:1,maxLevel:10,upgradeCost:3,upgradeEffect:{attack:.3,debuff:{burn:{value:.5,duration:.2}}}},{id:"inferno-Flame-control",name:"Контроль пламени",type:"control",rare:"rare",description:"Оглушает на 1 ход",icon:"inferno-flame-control.png",manaCost:1,count:1,bonus:{debuff:{stun:!0,duration:1}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{debuff:{stun:!0,duration:.2}}},{id:"inferno-Blade-of-flame",name:"Клинок пламени",type:"buff",rare:"rare",description:"+2 магического урона на 2 хода",icon:"inferno-blade-of-flame.png",manaCost:1,count:1,bonus:{buff:{attack:2,duration:2}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{attack:.5,duration:.2}}}],assassin:[{id:"assassin-Fatal-strike",name:"Смертельный удар",type:"attack",rare:"rare",description:"Наносит 1 урон, +10% шанс критического удара на 3 хода",icon:"assassin-fatal-strike.png",manaCost:5,count:1,bonus:{attack:1,buff:{critical:10,duration:3}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{attack:.5,buff:{critical:2,duration:.3}}},{id:"assassin-Poison-strike",name:"Ядовитый удар",type:"attack",rare:"rare",description:"Наносит 2 урона, накладывает яд (2 урона за ход, 3 хода)",icon:"assassin-poison-strike.png",manaCost:3,count:1,bonus:{attack:2,debuff:{poison:{value:2,duration:3}}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{attack:.5,debuff:{poison:{value:.5,duration:.3}}}},{id:"assassin-First-aid",name:"Первая помощь",type:"heal",rare:"rare",description:"Исцеляет 4 HP в течение 2 ходов",icon:"assassin-first-aid.png",manaCost:3,count:1,bonus:{buff:{hp:4,duration:2}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{hp:1,duration:.2}}},{id:"assassin-Little-tricks",name:"Маленькие хитрости",type:"buff",rare:"rare",description:"+3 урона на 2 хода",icon:"assassin-little-tricks.png",manaCost:3,count:1,bonus:{buff:{attack:3,duration:2}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{attack:1,duration:.2}}},{id:"assassin-Blind",name:"Ослепление",type:"control",rare:"rare",description:"30% шанс промаха у врага на 2 хода",icon:"assassin-blind.png",manaCost:3,count:1,bonus:{debuff:{hitChance:-30,duration:2}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{debuff:{hitChance:-3,duration:.2}}},{id:"assassin-Insidious-strike",name:"Коварный удар",type:"attack",rare:"rare",description:"Наносит 1 урон, +1 урона на 1 ход",icon:"assassin-insidious-strike.png",manaCost:2,count:1,bonus:{attack:1,buff:{attack:1,duration:1}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{attack:.5,buff:{attack:.3,duration:.2}}},{id:"assassin-Blow-to-the-heart",name:"Удар в сердце",type:"control",rare:"rare",description:"Оглушает на 1 ход",icon:"assassin-blow-to-the-heart.png",manaCost:3,count:1,bonus:{debuff:{stun:!0,duration:1}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{debuff:{stun:!0,duration:.5}}},{id:"assassin-Deadly-technique",name:"Смертельный прием",type:"attack",rare:"epic",description:"Наносит 5 урона",icon:"assassin-deadly-technique.png",manaCost:7,count:1,bonus:{attack:5},level:1,maxLevel:10,upgradeCost:7,upgradeEffect:{attack:1}},{id:"assassin-Sprint",name:"Спринт",type:"buff",rare:"rare",description:"+5 скорости на 2 хода",icon:"assassin-sprint.png",manaCost:3,count:1,bonus:{buff:{speed:5,duration:2}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{speed:1,duration:.2}}},{id:"assassin-Shadow-veil",name:"Теневая завеса",type:"defense",rare:"rare",description:"+3 уклонения на 2 хода",icon:"assassin-shadow-veil.png",manaCost:2,count:1,bonus:{buff:{dodge:3,duration:2}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{dodge:1,duration:.2}}},{id:"assassin-Critical-strike",name:"Критический удар",type:"attack",rare:"rare",description:"Наносит 3 урона",icon:"assassin-critical-strike.png",manaCost:4,count:1,bonus:{attack:3},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{attack:1}},{id:"assassin-Stealth",name:"Скрытность",type:"defense",rare:"rare",description:"+5 уклонения на 2 хода",icon:"assassin-stealth.png",manaCost:3,count:1,bonus:{buff:{dodge:5,duration:2}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{dodge:1,duration:.2}}},{id:"assassin-Agility",name:"Ловкость",type:"buff",rare:"rare",description:"+3 скорости на 2 хода",icon:"assassin-agility.png",manaCost:2,count:1,bonus:{buff:{speed:3,duration:2}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{speed:1,duration:.2}}},{id:"assassin-Shadow-strike",name:"Теневой удар",type:"attack",rare:"rare",description:"Наносит 2 урона",icon:"assassin-shadow-strike.png",manaCost:3,count:1,bonus:{attack:2},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{attack:.5}},{id:"assassin-Poison-trap",name:"Ядовитая ловушка",type:"control",rare:"rare",description:"Накладывает яд (2 урона за ход, 3 хода)",icon:"assassin-poison-trap.png",manaCost:3,count:1,bonus:{debuff:{poison:{value:2,duration:3}}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{debuff:{poison:{value:.5,duration:.3}}}},{id:"assassin-Quick-strike",name:"Быстрый удар",type:"attack",rare:"common",description:"Наносит 2 урона, +1 использование",icon:"assassin-quick-strike.png",manaCost:2,count:2,bonus:{attack:2},level:1,maxLevel:10,upgradeCost:3,upgradeEffect:{attack:.5}},{id:"assassin-Shadow-accuracy",name:"Теневая меткость",type:"buff",rare:"rare",description:"+3 меткости на 2 хода",icon:"assassin-shadow-accuracy.png",manaCost:2,count:1,bonus:{buff:{hitChance:3,duration:2}},level:1,maxLevel:10,upgradeCost:5,upgradeEffect:{buff:{hitChance:1,duration:.2}}}]},z=$({name:"Cards",setup(){return{person:x()}},data:()=>({selectedCard:null,errorMessage:"",isLoading:!1,activeCard:null}),computed:{cards(){return E[this.person.character.species]||E.ranger},upgradePoints(){return this.person.character.upgradePoints||0},selectedCards(){return this.person.character.cards||{}}},methods:{getUpgradeCost(a){const e=(this.selectedCards[a.id]||{level:1,count:1}).level,f=a.upgradeCost,m=a.rare==="common"?1:a.rare==="rare"?2:3;return f+(e-1)*m},canUpgradeCard(a){const t=this.selectedCards[a.id]||{level:1,count:1};return this.upgradePoints>=this.getUpgradeCost(a)&&t.level<a.maxLevel},onSelectCard(a){this.selectedCard=a},async onUpgrade(a){var t,e;if(this.selectedCard=a,this.errorMessage="",!this.canUpgradeCard(a)){this.errorMessage="Недостаточно очков улучшения или максимальный уровень!";return}this.isLoading=!0;try{const{data:f,error:m}=await this.$supabase.auth.getUser();if(m||!f.user){this.errorMessage="Ошибка: пользователь не авторизован",this.isLoading=!1;return}const v=f.user.id,b=this.selectedCards[a.id]||{level:1,count:a.count},r={...b,level:b.level+1},p={...this.selectedCards,[a.id]:r};for(const[s,C]of Object.entries(a.upgradeEffect))if(s==="attack"||s==="hp")a.bonus[s]=(a.bonus[s]||0)+C;else if(s==="buff"||s==="debuff"){const i=a.bonus[s]||{};for(const[n,g]of Object.entries(C))n==="poison"||n==="bleed"||n==="burn"||n==="freeze"?i[n]={value:(((t=i[n])==null?void 0:t.value)||0)+g.value,duration:(((e=i[n])==null?void 0:e.duration)||0)+(g.duration||0)}:n==="duration"?i[n]=(i[n]||0)+g:i[n]=(i[n]!==void 0?i[n]:g===!0?!0:0)+(typeof g=="number"?g:0);a.bonus[s]=i}a.description=this.generateCardDescription(a);const{error:l}=await this.$supabase.from("characters").update({cards:p,upgradePoints:this.upgradePoints-this.getUpgradeCost(a)}).eq("id",v);if(l){this.errorMessage=`Ошибка улучшения карты: ${l.message}`,console.error(l),this.isLoading=!1;return}this.person.updateCards(p),this.person.character.upgradePoints-=this.getUpgradeCost(a),this.selectedCard=null}catch(f){this.errorMessage="Неизвестная ошибка. Попробуйте позже.",console.error(f)}finally{this.isLoading=!1}},generateCardDescription(a){let t="";if(a.bonus.attack&&(t+=`Наносит ${a.bonus.attack} урона`),a.bonus.hp&&(t+=`${t?", ":""}Восстанавливает ${a.bonus.hp} HP`),a.bonus.buff){const e=a.bonus.buff;e.defence&&(t+=`${t?", ":""}+${e.defence} защиты`),e.attack&&(t+=`${t?", ":""}+${e.attack} урона`),e.dodge&&(t+=`${t?", ":""}+${e.dodge} уклонения`),e.mp&&(t+=`${t?", ":""}восстанавливает ${e.mp} маны`),e.hitChance&&(t+=`${t?", ":""}${typeof e.hitChance=="number"?`+${e.hitChance} меткости`:"+100% шанс попадания"}`),e.speed&&(t+=`${t?", ":""}${e.speed>0?"+":""}${e.speed} скорости`),e.critical&&(t+=`${t?", ":""}+${e.critical}% шанс критического удара`),e.ignoreDefense&&(t+=`${t?", ":""}игнорирует ${e.ignoreDefense}% защиты`),e.debuffImmune&&(t+=`${t?", ":""}невосприимчивость к дебаффам`),e.immune&&(t+=`${t?", ":""}блокирует атаку`),e.duration&&(t+=` на ${e.duration} хода`)}if(a.bonus.debuff){const e=a.bonus.debuff;e.poison&&(t+=`${t?", ":""}накладывает яд (${e.poison.value} урона за ход, ${e.poison.duration} хода)`),e.bleed&&(t+=`${t?", ":""}вызывает кровотечение (${e.bleed.value} урона за ход, ${e.bleed.duration} хода)`),e.burn&&(t+=`${t?", ":""}накладывает горение (${e.burn.value} урона за ход, ${e.burn.duration} хода)`),e.freeze&&(t+=`${t?", ":""}замораживает на ${e.freeze.duration} ход`),e.stun&&(t+=`${t?", ":""}оглушает на ${e.duration||1} ход`),e.hitChance&&(t+=`${t?", ":""}шанс промаха ${-e.hitChance}%`),e.ignoreDefense&&(t+=`${t?", ":""}снижает защиту на ${e.ignoreDefense}%`),e.healBlock&&(t+=`${t?", ":""}блокирует исцеление`),e.speed&&(t+=`${t?", ":""}${e.speed} скорости`),e.duration&&!e.stun&&!e.healBlock&&!e.poison&&!e.bleed&&!e.burn&&!e.freeze&&(t+=` на ${e.duration} хода`)}return a.bonus.aoe&&(t+=`${t?", ":""}всем врагам`),t||a.description}}}),P={class:"cards"},B={class:"cards__container"},S={key:0,class:"cards__error"},H={key:1,class:"cards__loading"},F={class:"cards__points"},M={class:"cards__grid"},U=["onClick"],I={class:"cards__level"},q={key:2,class:"cards__block"},A={class:"cards__name"},V={class:"cards__description"},j={class:"cards__cost"},N={class:"cards__type"},O={class:"cards__buttons"},R=["disabled","onClick"];function T(a,t,e,f,m,v){const b=_;return u(),d("div",P,[o("div",B,[t[0]||(t[0]=o("h2",{class:"cards__title"},"Карты",-1)),a.errorMessage?(u(),d("div",S,c(a.errorMessage),1)):k("",!0),a.isLoading?(u(),d("div",H,"Загрузка...")):k("",!0),o("div",F,"Очки улучшения: "+c(a.upgradePoints),1),o("div",M,[(u(!0),d(h,null,y(a.cards,r=>{var p,l;return u(),d("div",{key:r.id,class:L(["cards__card",{"cards__card--disabled":!a.canUpgradeCard(r),"cards__card--attack":r.type==="attack","cards__card--defense":r.type==="defense","cards__card--buff":r.type==="buff","cards__card--heal":r.type==="heal","cards__card--control":r.type==="control","cards__card--active":((p=a.selectedCard)==null?void 0:p.id)===r.id}]),onClick:s=>a.onSelectCard(r)},[D(b,{class:"cards__image",src:`/images/components/cards/${a.person.character.species}/${r.icon}`,alt:r.name},null,8,["src","alt"]),o("span",I,"Уровень: "+c(((l=a.selectedCards[r.id])==null?void 0:l.level)||1)+"/"+c(r.maxLevel),1)],10,U)}),128))]),a.selectedCard?(u(),d("div",q,[a.selectedCard.id===a.card.id?(u(!0),d(h,{key:0},y(a.cards,r=>(u(),d("div",{class:"cards__descriptions",key:r.id},[o("div",A,c(r.name),1),o("div",V,c(r.description),1),o("div",j,"Стоимость улучшения: "+c(a.getUpgradeCost(r)),1),o("div",N,c(r.type),1),o("div",O,[o("button",{class:L([a.canUpgradeCard(r)?"":"button--disabled","cards__event button button--metal"]),disabled:!a.canUpgradeCard(r),type:"button",onClick:p=>a.onUpgrade(r)}," Улучшить ",10,R)])]))),128)):k("",!0)])):k("",!0)])])}const W=w(z,[["render",T],["__scopeId","data-v-79c85f4e"]]);export{W as default};
